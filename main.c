#include <main.h>

char bichig[25] = "test data update of MAIN"; //test data for testing 
char bichigcom[24] = "test data update of COM"; //test data for testing 
char bichigadcs[25] = "test data update of ADCS"; //test data for testing 
char *read_data; //MAIN flash received data will be stored in here 
// unsigned char buffer[40]; //secondary buffer 
char *read_data_com; //COM flash received data will be stored in here 
unsigned int8 local_buffer[10]; 
    unsigned int8 adcs_status = 0;
    unsigned int32 last_adcs_address = 0;
    unsigned int32 first_adcs_data_address = 0;

void main() {
    //------------------------Start_Indicator-------------------------
    startup_freeze();
    //--------------------------RTC-----------------------------------
    RTC_initialize();
    //------------------------restart_indicator-----------------------
    update_shutdown_count();
    //------------------------read_chip_ID----------------------------
    fprintf(EXT, "Reading chip ID of main\n");
    // READ_CHIP_ID_GENERIC(SPIPORT, CS_PIN_1, -1);  // Pass the array to be filled by the function
    fprintf(EXT, "Reading chip ID of COM\n");
    READ_CHIP_ID_OF_COM();
    fprintf(EXT, "Reading chip ID of ADCS\n");
    READ_CHIP_ID_OF_ADCS();
    fprintf(EXT, "Done reading chip ID\n");
    delay_ms(1000);


    //------------------------write_flash_memory--------------------------
    // Write and read from MAIN flash memory 
    fprintf(EXT, "Starting to write data in MAIN flash memory\n");
    WRITE_DATA_NBYTES (0x00005000, bichig, sizeof(bichig));
    delay_ms(1000);
    
    read_data = (0x00005000, sizeof(bichig));
    delay_ms(1000);
    for (int i = 0; i < sizeof(bichig); i++) {
        fprintf(EXT, "%c", read_data[i]);
        delay_ms(2);
    }
    fprintf(EXT, "\n"); 

    // Write and read from COM flash memory
    fprintf(EXT, "Starting to write data in COM flash memory\n");
    WRITE_DATA_NBYTES_COM(0x00005000, bichigcom, sizeof(bichigcom));
    delay_ms(1000);
    
    read_data_com = READ_DATA_NBYTES_COM(0x00005000, sizeof(bichigcom));
    delay_ms(1000);
    for (int i = 0; i < sizeof(bichigcom); i++) {
        fprintf(EXT, "%c", read_data_com[i]);
        delay_ms(2);
    }
    fprintf(EXT, "\n"); 
    fprintf(EXT, "MAIN TEST IS FINISHED!\n");
    //------------------------send_and_write_adcs_mission--------------------------
//    adcs_mission_mode();
// adcs_mission_mode_dumm();
     //------------------------send_and_plot_IHC_miss--------------------------
    // // eps_mission_mode();
    // fprintf(CAM, "v247"); // command to take picture ov5642 camera module c is the each slot of 64kB and 247 is one of 0 to 2047 slots 
    // delay_ms(2000);
    // fprintf(EXT, "CAM COMMAND SENT\n"); // after sending command wait for 1 second and receive jpeg from camera ov5642 it's 8kB data 
    // //cam1 command "c" for take picture in slot 1-2047 slots of 64kB
    // //cam2 command "v" for take picture in slot 1-2047 slots of 64kB
    // //cam2 command "f" for retreat command from taking picture form given slot 
    // //cam1 command "d" for retreat command from taking picture form given slot
    // //example to take picture in slot 247 
    // //camera example output jpeg data should look like this 
    // /*04 00 00 E6 38 00 00 E6 FD 42 4F 4F 54 0D 0A 4A 45 44 45 43 3A 20 30 20 30 20 30 0D 0A 43 41 4D 20 53 50 49 20 74 65 73 74 3A 20 30 78 30 0D 0A 43 41 4D 20 53 50 49 20 74 65 73 74 3A 20 30 78 31 31 0D 0A 43 61 6D 65 72 61 20 72 65 61 64 79 2E 0D 0A 43 6F 6D 6D 61 6E 64 73 3A 0D 0A 20 20 63 4E 20 3D 20 63 61 70 74 75 72 65 20 26 20 73 61 76 65 20 74 6F 20 73 6C 6F 74 20 4E 20 20 20 28 65 78 61 6D 70 6C 65 3A 20 63 35 29 0D 0A 20 20 64 4E 20 3D 20 64 75 6D 70 20 73 6C 6F 74 20 4E 20 62 69 6E 61 72 79 20 20 20 20 20 20 20 20 20 28 65 78 61 6D 70 6C 65 3A 20 64 35 29 0D 0A 4D 61 78 20 73 6C 6F 74 73 3A 20 32 30 34 37 0D 0A 00 00 0E 58 FF D8 FF E0 00 10 4A 46 49 46 00 01 01 01 00 00 00 00 00 00 FF DB 00 43 00 08 06 06 07 06 05 08 07 07 07 09 09 08 0A 0C 14 0D 0C 0B 0B 0C 19 12 13 0F 14 1D 1A 1F 1E 1D 1A 1C 1C 20 24 2E 27 20 22 2C 23 1C 1C 28 37 29 2C 30 31 34 34 34 1F 27 39 3D 38 32 3C 2E 33 34 32 FF DB 00 43 01 09 09 09 0C 0B 0C 18 0D 0D 18 32 21 1C 21 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 FF C4 00 1F 00 00 01 05 01 01 01 01 01 01 00 00 00 00 00 00 00 00 01 02 03 04 05 06 07 08 09 0A 0B FF C4 00 B5 10 00 02 01 03 03 02 04 03 05 05 04 04 00 00 01 7D 01 02 03 00 04 11 05 12 21 31 41 06 13 51 61 07 22 71 14 32 81 91 A1 08 23 42 B1 C1 15 52 D1 F0 24 33 62 72 82 09 0A 16 17 18 19 1A 25 26 27 28 29 2A 34 35 36 37 38 39 3A 43 44 45 46 47 48 49 4A 53 54 55 56 57 58 59 5A 63 64 65 66 67 68 69 6A 73 74 75 76 77 78 79 7A 83 84 85 86 87 88 89 8A 92 93 94 95 96 97 98 99 9A A2 A3 A4 A5 A6 A7 A8 A9 AA B2 B3 B4 B5 B6 B7 B8 B9 BA C2 C3 C4 C5 C6 C7 C8 C9 CA D2 D3 D4 D5 D6 D7 D8 D9 DA E1 E2 E3 E4 E5 E6 E7 E8 E9 EA F1 F2 F3 F4 F5 F6 F7 F8 F9 FA FF C4 00 1F 01 00 03 01 01 01 01 01 01 01 01 01 00 00 00 00 00 00 01 02 03 04 05 06 07 08 09 0A 0B FF C4 00 B5 11 00 02 01 02 04 04 03 04 07 05 04 04 00 01 02 77 00 01 02 03 11 04 05 21 31 06 12 41 51 07 61 71 13 22 32 81 08 14 42 91 A1 B1 C1 09 23 33 52 F0 15 62 72 D1 0A 16 24 34 E1 25 F1 17 18 19 1A 26 27 28 29 2A 35 36 37 38 39 3A 43 44 45 46 47 48 49 4A 53 54 55 56 57 58 59 5A 63 64 65 66 67 68 69 6A 73 74 75 76 77 78 79 7A 82 83 84 85 86 87 88 89 8A 92 93 94 95 96 97 98 99 9A A2 A3 A4 A5 A6 A7 A8 A9 AA B2 B3 B4 B5 B6 B7 B8 B9 BA C2 C3 C4 C5 C6 C7 C8 C9 CA D2 D3 D4 D5 D6 D7 D8 D9 DA E2 E3 E4 E5 E6 E7 E8 E9 EA F2 F3 F4 F5 F6 F7 F8 F9 FA FF C0 00 11 08 00 F0 01 40 03 01 21 00 02 11 01 03 11 01 FF DA 00 0C 03 01 00 02 11 03 11 00 3F 00 DE CD 34 9A A2 48 CD 30 D4 8C 8C D4 66 80 12 96 80 1A 68 A0 05 A7 0A 00 75 3A 80 0A 28 00 A5 CD 03 0C D2 66 80 0D D4 DD D4 08 6E EA 4F 32 81 12 2C 95 28 7A 00 90 49 52 09 68 02 55 9A A4 13 D0 22 41 3D 48 2E 68 02 41 73 EF 4E FB 55 00 48 2E BD E9 0D E7 BD 02 23 37 BE F5 13 5F 7B D0 04 0D 7C 7D 6A 09 2F 4E DE B4 01 1D 34 D3 2C 8C D3 69 0C 8C D4 74 00 52 D0 02 51 40 05 28 A0 43 A9 68 18 B4 50 02 52 66 80 13 34 99 A0 06 96 A6 16 A0 43 4B 54 7B E8 01 44 B5 30 96 80 24 12 D4 82 4A 04 3C 49 4E F3 68 01 DE 6D 2F 9D 40 0E F3 FD E9 7C FA 00 3E D3 51 B5 CF BD 00 44 6E BD EA 16 BB A0 08 5A EE A1 7B BE 0D 02 36 E8 C5 05 0D 22 A3 22 81 91 95 A6 ED A4 01 B6 8D B4 00 9B 68 C5 00 18 A5 A0 05 A2 80 16 8A 00 61 A6 50 02 66 9B 9A 60 34 9A 8C 9A 00 8C B5 44 CF 40 86 79 9C D3 D6 6A 00 95 65 A9 04 D4 08 70 9A 9D E7 50 02 F9 D4 79 F4 00 BE 7D 27 DA 28 02 36 BB AA ED 79 40 10 3D E7 BD 40 D7 94 00 CF B4 66 9F BC 91 40 1D 90 A2 82 86 9A 8C 8A 40 33 6D 1B 69 00 6D A3 6D 30 13 14 DC 50 02 62 8C 50 02 E2 8C 50 02 62 8A 00 61 A8 DA 80 22 34 C2 69 81 1E EA 61 6A 00 61 35 0B 9A 04 40 4D 01 A8 02 41 25 48 24 A0 07 09 69 7C DA 00 3C DA 4F 3A 80 1A 67 A8 9E E6 81 15 DE E6 AB 3D D7 34 01 01 B8 CD 39 5C 9A 00 B0 95 65 7A 50 23 B2 CD 2D 49 61 46 DA 00 36 D2 6D A0 03 65 26 28 01 9B 69 31 40 06 28 DB 4C 03 14 B8 A0 04 C5 34 AD 00 46 45 44 D4 01 03 54 2C 68 01 84 D3 0D 30 1A 7A 54 4D 40 10 35 37 34 00 66 97 34 00 BB A8 DD 40 84 2F 4C 32 50 04 4D 2D 40 F3 D0 05 69 24 26 AB 92 4D 02 1C A2 AD 46 28 02 DA 55 A5 E9 40 8E C8 21 A9 04 75 25 8E D9 4E F2 E9 00 BE 5D 2F 97 40 08 63 A6 79 54 00 D3 1D 46 52 98 09 E5 9A 3C B3 40 0B E5 D2 F9 74 00 9B 29 85 68 02 26 5A 81 D6 98 15 DC 55 76 A0 08 9A A2 26 98 0D 2D 50 B3 D0 04 45 A9 99 A0 03 34 6E A4 01 BA 8D F4 00 C2 F5 1B 3D 00 40 CC 73 51 1C D0 02 62 9B 8E 68 11 22 AD 4E 82 98 8B 29 56 17 A5 02 3D 01 62 A9 04 55 05 8F 10 D3 BC 9A 00 5F 26 9D E4 D0 02 79 54 D3 0D 30 19 E4 53 0C 14 00 79 14 79 14 00 79 34 9E 55 00 46 52 A2 2B 40 10 3A D5 77 5A 60 55 90 55 49 28 02 BB 54 26 98 11 93 51 9A 00 8F 14 62 80 0C 52 62 90 0D C5 26 28 01 A4 53 0A D0 03 0A D3 4A 50 03 76 D1 B6 80 1E AB 53 01 4C 44 AA 2A 75 A0 93 D2 91 2A 75 8E A0 B2 41 1D 3B CB A0 05 F2 E9 C2 2A 60 2F 95 4D F2 A8 10 DF 2A 9B E5 50 30 F2 69 3C 9A 00 4F 2E A2 68 E8 11 0B 25 42 C9 40 15 DD 6A AC 8B 4C 0A 92 0A A1 35 03 2A 39 A8 19 A9 81 09 34 94 80 4A 5A 00 28 C5 00 26 29 B8 A4 02 6D A6 91 40 C4 DB 4D 2B 4C 43 36 D2 6D A0 07 81 52 0A 62 24 5A 98 74 A0 47 A9 22 D4 EA 95 05 12 05 A9 36 D0 20 DB 4B 8A 60 2E 28 F2 E8 00 F2 A8 F2 A9 80 79 54 79 34 80 8C C3 50 BC 54 C0 AC F1 D5 67 4A 04 55 91 6A 9C 82 81 95 24 AC F9 E9 8C CE 94 D5 72 68 01 B4 EA 40 2E 29 71 40 06 28 C5 21 89 B6 8D B4 00 9B 68 DB 40 0D DB 4D 2B 40 0C 2B 49 B6 98 85 C5 3B 14 C0 78 A9 87 4A 09 3D 59 05 58 55 A8 19 2A A5 3F 6D 30 17 65 2E CA 00 70 4A 78 8E 98 87 F9 54 79 54 00 BE 55 2F 95 40 0C 31 54 0F 0D 30 2B 3C 35 56 48 68 02 9C B0 D6 7C D1 50 06 7C A9 59 F3 A5 03 33 26 5A A8 47 34 86 2D 28 A0 07 52 E2 90 C5 C5 2E 28 00 C5 1B 69 0C 5D B4 9B 68 01 36 D3 0A D3 10 C2 B4 DD B4 08 31 4B 8A A0 1E 05 4A 05 04 9E B6 8B 53 AA D4 0C 95 45 49 8A 60 2E DA 5D B4 C0 90 2D 48 12 81 12 04 A7 79 74 00 EF 2E 97 CA A6 03 1A 2A 85 A2 A0 0A EF 15 55 92 2A 00 A5 2C 55 9F 3C 54 01 97 71 1D 66 4E 94 0C CB 9D 6A 83 0A 43 12 9C 29 0C 75 2D 20 16 96 81 8E A5 A0 05 C5 18 A0 04 22 98 56 80 18 56 99 8A 62 0D B4 B8 A6 21 C0 54 A0 71 4C 47 AC C7 56 16 A0 09 56 A4 A6 02 D3 85 30 25 5A 99 45 02 26 55 A7 85 A6 21 FB 69 DB 28 01 A5 2A 16 8E 80 2B BC 75 56 48 E8 02 9C B1 D6 74 F1 D0 06 4D CC 75 91 3A D0 33 26 E4 73 59 CF D6 91 44 74 B4 86 3A 9D 48 63 A9 68 01 45 3A 80 1D 4E C5 00 04 53 08 A0 06 6D A6 E2 98 86 E2 97 14 C4 38 0A 94 0E 29 88 F5 28 CD 5A 53 52 22 45 35 20 A6 03 A9 E2 80 24 5A 99 4D 00 4E A6 A5 06 98 89 05 3A 80 0A 8D A8 02 B3 D5 59 28 02 9C B5 9D 3D 00 65 5C 8A C7 B8 14 0C C7 BA 15 95 27 5A 45 11 51 48 A1 D9 A5 CD 20 1D 9A 5C D0 03 B3 4E 14 0C 78 35 20 A0 07 53 71 40 86 91 4C 22 98 0D C5 18 A6 49 20 15 20 14 C4 7A 4C 6F 56 95 AA 44 4E A6 A5 06 98 0B 9A 50 D4 0C 91 5A A6 56 A0 44 EA D5 32 9A 62 24 06 9E 0D 00 2D 44 E6 80 2B B9 AA B2 1A 00 A5 29 AA 13 9A 00 CA B9 AC 7B 8A 06 65 5C D6 4C BD 69 14 41 45 49 41 4B 40 0B 4E A0 07 53 85 00 3C 53 C5 03 25 14 B4 00 D3 4C 34 C4 37 14 01 4C 92 45 15 28 1C 53 11 DF 44 D5 71 1A A0 44 CA F5 27 99 4C 61 E6 52 89 29 81 22 C9 53 AB D0 04 EA F5 2A BD 31 12 87 A9 03 D0 21 4B D4 4E F4 08 AC EF 55 A4 7A 06 52 95 EB 3E 67 A0 0C BB 87 AC A9 9A 82 8C CB 83 59 53 75 A4 32 0A 2A 4A 0A 5A 00 5A 75 00 3A 9D 40 0F 14 F1 40 C9 56 96 80 10 D3 28 10 DA 51 54 49 2A D4 A3 A5 31 1D A4 4F 56 95 EA 00 78 92 9D E6 D3 00 F3 68 F3 A9 8C 95 26 AB 2B 2D 02 27 59 6A 51 2D 31 12 09 69 E2 5A 04 3B CD A8 9A 5A 00 81 A5 AA D2 49 40 14 A5 92 B3 E6 92 80 33 27 92 B3 E5 6A 0A 33 67 6A CD 94 F3 48 64 34 B5 25 0B 4B 40 0B 4A 28 01 D4 EA 00 78 A7 8A 06 4A B4 EA 00 69 A6 50 21 31 4A 2A 89 25 02 A5 14 C4 CE B5 2A CA 9A 80 1D 9A 69 6A 63 23 F3 69 3C EA 00 95 25 AB 49 2D 30 26 59 AA 61 35 31 12 09 A9 C2 6A 04 2F 9D 4C 69 A8 02 16 9A AA C9 35 00 52 96 6A CF 9A 6A 00 A1 24 95 46 59 28 28 A1 33 55 16 A9 18 98 A5 C5 21 8B 8A 5C 50 02 E2 9D 8A 00 5C 52 81 40 0F 14 F1 40 C9 05 2D 00 25 36 81 09 4A 2A 89 25 5A 98 0E 29 88 EB 10 54 C0 54 0C 5A 63 F4 A0 0A 8C 79 A4 06 98 C9 D0 D5 85 34 C4 48 1A 9F BE 98 87 79 94 EF 3A 80 0F 3E 98 D3 D0 22 06 9E AB 49 71 40 14 A5 9E A9 C9 2D 03 2A 49 25 51 96 4A 43 2A B9 A8 31 CD 22 85 DB 4E DB 48 07 6D A5 D9 40 0B B6 97 6D 00 2E DA 5D B4 00 B8 A5 02 81 92 2D 2E 28 01 31 49 8A 04 25 38 0A 64 92 A8 A9 80 AA 11 D7 2A D4 C1 6A 00 5D B4 C6 4A 63 2A 3C 74 D1 1D 03 26 55 A9 54 53 11 26 28 A6 02 53 0B 50 22 32 F5 13 49 40 15 DE 5A AB 24 B4 01 55 E4 AA B2 4B 40 CA 92 4B 55 9D EA 40 88 9C D1 48 A1 E2 9C 05 00 3F 14 EC 50 02 ED A5 C5 00 2E DA 36 D0 01 B6 97 6D 03 1E 16 9D B6 81 09 B6 93 6D 00 26 DA 00 A6 49 32 8A 94 0E 2A 84 76 68 95 3A C5 52 22 4F 26 90 C3 41 44 0F 6F 51 79 34 00 E1 1D 48 22 A6 03 BC BA 69 8E 81 11 B2 54 25 29 81 13 21 A8 1C 62 80 29 C9 55 1E 81 95 64 6A A7 2B 52 02 A3 B5 47 48 60 29 C0 52 18 F0 29 D8 A0 07 8A 75 00 2D 3B 14 00 B8 A7 62 98 0B B6 9D B6 90 0E 0B 4F DB 40 0B B2 9A 52 98 86 ED A3 6D 31 0F 55 A9 40 A6 23 BA 8A 3A B6 91 54 88 94 43 4E F2 28 19 1B 5B D4 2D 6D 40 09 F6 7F 6A 5F 22 98 0E F2 69 A6 0A 60 46 60 A8 8D BD 02 21 78 2A 9C B0 D0 33 3E 68 AA 84 8A 68 19 4A 50 6A 94 8B 48 0A EC 94 CC 52 18 B8 A7 01 48 63 F1 4E C5 00 3B 14 B8 A0 05 A7 D0 02 8A 75 00 3C 0A 78 14 C0 7E DA 90 2D 00 2E DA 69 5A 04 33 6D 1B 69 88 78 5A 7E DE 29 88 F4 38 A2 AB 89 15 49 25 85 86 A5 F2 28 18 D3 6F 51 35 BD 30 19 F6 7A 5F 22 80 0F 22 93 C8 A6 03 0D BD 31 A0 A0 0A D2 41 54 A5 82 80 33 E6 82 B2 EE 20 A0 66 74 B1 D5 29 23 A0 65 57 4A 84 8A 91 88 05 3F 14 86 3B 14 EA 00 5C 52 E2 80 1D 8A 70 A6 03 A9 C0 52 01 E0 54 80 50 21 EA 2A 60 B4 C6 04 53 71 40 86 ED A3 6D 31 0F 0B 4F DB C5 31 1E 97 14 55 76 38 AA 49 2C 05 A7 62 A8 61 8A 6E C1 40 C4 F2 C5 1E 58 A0 41 E5 8A 3C B1 40 86 F9 42 A3 78 68 02 A4 91 55 19 62 A0 0A 13 45 59 B3 C5 40 CC 99 E1 AC E9 12 82 8A 72 25 57 65 A9 18 CC 52 E2 81 8E A5 A0 05 A7 50 02 D3 A8 01 C2 9E 28 10 F1 52 0A 00 95 45 4C 07 14 0C 31 49 B6 80 13 65 38 25 32 49 02 54 9E 5F 14 C4 CF 50 8E 2C 54 E0 52 25 0B 45 32 C2 8A 00 28 A0 02 8A 00 28 34 08 AF 2A 55 19 63 A0 92 84 D1 D6 74 F1 D0 33 2A E2 2A CA 99 28 19 4A 44 AA 6E B4 86 47 B6 97 6D 21 8B 8A 5C 50 31 71 46 28 01 69 D4 00 E1 4E 14 08 90 54 82 80 27 4A 99 45 03 1F B6 8D 94 00 BB 29 C1 29 92 4A 12 9F B3 E5 A6 23 D3 85 2D 00 82 8A 06 14 50 01 45 00 14 50 01 45 00 21 15 5A 58 E8 20 A3 2C 75 9F 34 54 01 97 71 0D 63 DC 43 41 46 6C 89 54 E4 14 86 47 B2 8D B4 86 1B 69 71 40 06 DA 31 40 06 29 71 40 0B 8A 70 A0 09 05 48 B4 01 61 2A CA 2D 03 25 D9 4E D9 40 83 6D 38 25 31 13 2A 53 FC BF 96 98 99 E8 D4 50 30 A2 80 0A 28 00 A2 80 0A 28 00 A2 80 0A 42 28 13 2A CB 15 67 CD 15 04 99 D3 C3 59 77 36 F4 0C C5 B9 83 15 9A EB CD 22 86 6D A5 DB 48 04 DB 46 DA 00 4C 51 8A 00 31 49 8A 06 2E 29 71 40 0F 15 22 D0 05 98 C5 5D 8D 28 19 60 25 3B 65 02 0F 2E A5 48 69 88 98 45 4E 31 FC B4 C9 67 77 45 05 05 14 00 51 40 05 14 00 51 40 05 14 00 51 40 0D 65 AA 92 C7 41 06 7C D1 D6 6D C4 54 0C C7 BA 8A B1 A5 87 06 91 44 1B 29 36 D2 18 6D A4 DB 40 84 DB 49 8A 00 6E 28 C5 00 18 A5 02 81 8F C5 48 A2 80 2E C2 95 A3 0C 54 0C 9F 65 3B 65 32 47 AC 55 60 26 29 80 E0 94 32 7C B4 10 76 34 50 58 51 40 05 14 00 51 40 05 14 00 51 40 05 14 00 53 1D 68 13 28 4C 95 9B 3A 50 23 26 E6 3A CA 9A 2A 45 14 9E 3A 8B 6D 21 89 B6 93 6D 00 26 DA 4D B4 00 DD B4 6C A0 03 65 2E CA 00 78 4A 95 23 A0 66 9D BC 35 7D 52 81 12 04 A9 04 74 C4 4A B1 D4 A2 3A 62 1D B2 87 4F 90 D0 49 D4 51 41 61 45 00 14 50 01 45 00 14 50 01 45 00 14 50 01 41 A0 0A B3 2D 66 CC B4 12 66 CE 95 99 3C 74 8A 33 A4 4A AE 56 A4 A1 B8 A4 C5 00 26 DA 4D B4 C0 36 D2 EC A0 05 11 53 C4 34 01 2A DB D5 98 AD A8 03 4A 28 6A DA C3 4C 92 75 82 A5 10 53 02 41 0D 3B CA A0 41 E5 D3 64 4F 90 D0 49 BF 45 05 85 14 00 51 40 05 14 00 51 40 05 14 00 51 40 05 14 01 1C 83 22 B3 A6 5A 09 33 E6 5A CD 9D 69 14 66 4C B5 4D 85 48 C8 E9 28 18 94 B8 A0 07 05 A9 02 D0 04 CB 1D 4E 90 D3 02 C2 43 56 A3 86 98 8B D1 C3 56 92 2A 62 27 58 AA 51 15 02 1F E5 51 E5 50 21 3C AA 8E 48 FF 00 76 68 11 FF D9*/
    // char cam_response; 
    // fprintf(CAM, "f247");
    // fprintf(EXT, "CAM1 RETREAT COMMAND SENT\n");
    // fprintf(EXT, "Waiting for CAM response...\n");
    // //take the response from the camera and print it to EXT
    // cam_response = fgetc(CAM);
    // while(cam_response != 'K') {
    //     cam_response = fgetc(CAM);
    // }
    CAM_MISSION_MAIN(1, 247);

    



    //------------------------MAIN_MENU-------------------------------
    while (TRUE) {
        if (kbhit(EXT)) {
            main_menu();
            //  LOOP_DC_STATUS_ADDRESS();
            // fprintf(EXT, "%d\n",FLAG_DATA_ADDRESS_END);
        }
    }
}